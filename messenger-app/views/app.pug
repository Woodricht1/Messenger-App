html 
    head 
        title Messanger App
        link(rel = "icon", type = "image/png", href = "../messengerapplogo.png")
        link(rel = "stylesheet", type = "text/css", href = "../static/css/app.css")
    body(white-space = "nowrap")
        div(class = "container")
            span(class="box")
                div
                    image(id="applogotext", src = "../static/branding/messengerapplogotext.png", alt = "Messanger App Logo", width=480, height=80)
                    div(class = "credentials-block")
                        div(id = "welcome") Welcome, #{username}.
                            form(action = "/logout" method = "GET")
                                button(type = "Submit") LOG OUT
                            form(action="/drop_user", method="POST")
                                input(type="hidden", name="username", value=username)
                                button(type="submit", onclick="return confirm('Are you sure you want to delete your account? This action cannot be undone.');") Delete Account
                            form(action = "/edit_username" method = "GET")
                                button(type = "Submit") Change Username    
                            form(action = "/edit_password" method = "GET")
                                button(type = "Submit") Change Password   
                            form(action="/groups" method="post")
                                label(for="name") Group Name:
                                input(type="text" name="name" placeholder="Enter group name" required)
                                br
                                label(for="members") Members (User IDs, comma-separated):
                                input(type="text" name="members" placeholder="Enter user IDs" required)
                                br
                                button(type="submit") Create Group
                h1 Groups
                div#groups-container
                script.
                    async function loadGroups() {
                        try {
                            // Fetch groups from the backend
                            const response = await fetch('/groups'); // Update this URL based on your API
                            const groups = await response.json();

                            const container = document.getElementById('groups-container');
                            groups.forEach(group => {
                                // Create a div for each group
                                const groupDiv = document.createElement('div');
                                groupDiv.innerHTML = `
                                    <h2>${group.name}</h2>
                                    <ul>
                                        ${group.members.map(member => `<li>${member.name}</li>`).join('')}
                                    </ul>
                                `;
                                container.appendChild(groupDiv);
                            });
                        } catch (error) {
                            console.error('Error loading groups:', error);
                        }
                    }

    window.onload = loadGroups;
                    
    script(src="https://cdn.socket.io/4.5.4/socket.io.min.js")
    script(src="static/js/grouplist.js")